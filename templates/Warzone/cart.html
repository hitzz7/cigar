{% extends "./navbar.html" %}
{% load static %}

{% block title %}Your Cart{% endblock %}

{% block content %}
<style>
    /* General container */
    .cart-section {
        max-width: 1000px;
        margin: 80px auto;
        padding: 30px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        font-family: 'Poppins', sans-serif;
    }

    .cart-section h2 {
        font-size: 36px;
        font-weight: 700;
        text-align: center;
        margin-bottom: 40px;
        color: #111;
    }

    /* Table styling */
    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0 15px;
    }

    table th, table td {
        text-align: center;
        font-size: 16px;
        padding: 12px 10px;
        border: none;
    }

    table th {
        font-weight: 600;
        color: #555;
        text-transform: uppercase;
        font-size: 14px;
    }

    table tbody tr {
        background: #fdfdfd;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        transition: transform 0.2s;
    }

    table tbody tr:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }

    td img {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 8px;
    }

    /* Quantity input */
    input[type="number"] {
        width: 60px;
        padding: 6px;
        border: 1px solid #ccc;
        border-radius: 8px;
        text-align: center;
        font-size: 14px;
        transition: all 0.3s;
    }

    input[type="number"]:focus {
        outline: none;
        border-color: #00bcd4;
        box-shadow: 0 0 6px rgba(0,188,212,0.3);
    }

    /* Update button */
    form button {
        padding: 6px 12px;
        background: #00bcd4;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.3s;
        font-size: 14px;
        margin-left: 5px;
    }

    form button:hover {
        background: #0097a7;
    }

    /* Remove link */
    .remove-link {
        color: #e53935;
        font-weight: 600;
        transition: color 0.3s;
    }

    .remove-link:hover {
        color: #b71c1c;
    }

    /* Total section */
    .cart-total {
        text-align: right;
        font-size: 22px;
        font-weight: 700;
        margin-top: 20px;
        color: #111;
    }

    /* Checkout button */
    .checkout-btn {
        display: inline-block;
        margin-top: 30px;
        padding: 14px 28px;
        background: linear-gradient(90deg, #00bcd4, #0097a7);
        color: #fff;
        font-size: 16px;
        font-weight: 700;
        text-transform: uppercase;
        border-radius: 12px;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .checkout-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 15px rgba(0,0,0,0.2);
        background: linear-gradient(90deg, #0097a7, #00bcd4);
    }

    /* Empty cart message */
    .empty-cart {
        text-align: center;
        font-size: 20px;
        color: #777;
        margin-top: 40px;
    }

    /* Responsive for mobile */
    @media (max-width: 768px) {
        table th, table td {
            font-size: 14px;
            padding: 10px 5px;
        }

        input[type="number"] {
            width: 50px;
        }

        .checkout-btn {
            width: 100%;
            text-align: center;
        }
    }
</style>

<div class="cart-section">
    <h2>Your Cart</h2>

    {% if items %}
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Variant</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Subtotal</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.product }}</td>
                <td>{{ item.variant }}</td>
                <td>Rs {{ item.price }}</td>
                <td>
                    <form method="POST" action="{% url 'store:update_cart' item.id %}">
                        {% csrf_token %}
                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1">
                        <button type="submit">Update</button>
                    </form>
                </td>
                <td>Rs {{ item.subtotal }}</td>
                <td>
                    <a href="{% url 'store:remove_from_cart' item.id %}" class="remove-link">Remove</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div class="cart-total">Total: Rs {{ total }}</div>

    <a href="#" class="checkout-btn">Proceed to Checkout</a>
    {% else %}
    <p class="empty-cart">Your cart is empty.</p>
    {% endif %}
</div>

{% endblock %}
